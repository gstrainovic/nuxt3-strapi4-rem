<template>
  <div v-if="service_details">
    <div class="container mt-80">
      <div class="row">
        <template v-for="service in service_details" :key="service.attributes.category_id">
          {{ service.attributes.category_id }}
        </template>
      </div>
    </div>
  </div>


  <section class="faq__area p-relative z-index-1 pt-120 pb-105">
    <div class="container">
      <div class="row">
        <div class="col-xxl-5 col-xl-5 col-lg-6">
          <div class="faq__wrapper">
            <div class="section__title-wrapper-7 mb-60">
              <span class="section__title-pre-7">Tab Accordion</span>
              <h3 class="section__title-7">Accordion <br> with
                <span class="section__title-7-highlight">
                  rounded tab
                  <svg width="240" height="22" viewBox="0 0 240 22" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                      d="M0.440833 21.1152C78.9497 6.16225 158.05 4.53412 235.949 13.8239C237.497 14.0088 239.796 12.4065 239.988 9.93474C240.181 7.4176 238.026 5.44088 236.474 5.2332C157.99 -5.31675 79.1936 0.359501 0.316568 19.7785C-0.184784 19.9023 -0.0511379 21.2092 0.440833 21.1152Z"
                      fill="#2CAE76" />
                  </svg>
                </span>
              </h3>
            </div>

            <div class="faq__tab tp-tab pr-200">
              <nav>
                <div class="nav nav-tabs flex-column" id="nav-tab" role="tablist">

                  <div v-if="service_details">
                    <template v-for="service in service_details" :key="service.attributes.category_id">
                      <button class="nav-link"
                        :class="{ active: service.attributes.category_id === service_details[0].attributes.category_id }"
                        :id="service.attributes.category_id + '-tab'" data-bs-toggle="tab"
                        :data-bs-target="'#' + service.attributes.category_id" type="button" role="tab"
                        :aria-controls="service.attributes.category_id" aria-selected="true">
                        <span>
                          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                              d="M7.318 1.74134L2.467 5.52653C1.657 6.1574 1 7.50024 1 8.51863V15.1968C1 17.2877 2.701 19 4.789 19H15.211C17.299 19 19 17.2877 19 15.2058V8.6448C19 7.55431 18.271 6.1574 17.38 5.53554L11.818 1.63319C10.558 0.749983 8.533 0.795045 7.318 1.74134Z"
                              stroke="#525258" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M10 15.3951V12.6914" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                              stroke-linejoin="round" />
                          </svg>
                        </span>
                        {{ service.attributes.Category }}
                      </button>
                    </template>
                  </div>

                  <!-- 
                  <button class="nav-link" id="nav-general-tab-2" data-bs-toggle="tab" data-bs-target="#nav-general"
                    type="button" role="tab" aria-controls="nav-general" aria-selected="true">
                    <span>
                      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M7.318 1.74134L2.467 5.52653C1.657 6.1574 1 7.50024 1 8.51863V15.1968C1 17.2877 2.701 19 4.789 19H15.211C17.299 19 19 17.2877 19 15.2058V8.6448C19 7.55431 18.271 6.1574 17.38 5.53554L11.818 1.63319C10.558 0.749983 8.533 0.795045 7.318 1.74134Z"
                          stroke="#525258" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M10 15.3951V12.6914" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                          stroke-linejoin="round" />
                      </svg>
                    </span>
                    General Questions
                  </button> -->

                  <!-- <button class="nav-link" id="nav-community-tab-2" data-bs-toggle="tab" data-bs-target="#nav-community"
                    type="button" role="tab" aria-controls="nav-community" aria-selected="false">
                    <span>
                      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M4 7C5.65685 7 7 5.65685 7 4C7 2.34315 5.65685 1 4 1C2.34315 1 1 2.34315 1 4C1 5.65685 2.34315 7 4 7Z"
                          stroke="#525258" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                          stroke-linejoin="round" />
                        <path class="icon-color-theme"
                          d="M4 17C5.65685 17 7 15.6569 7 14C7 12.3431 5.65685 11 4 11C2.34315 11 1 12.3431 1 14C1 15.6569 2.34315 17 4 17Z"
                          stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                          stroke-linejoin="round" />
                        <path
                          d="M14 17C15.6569 17 17 15.6569 17 14C17 12.3431 15.6569 11 14 11C12.3431 11 11 12.3431 11 14C11 15.6569 12.3431 17 14 17Z"
                          stroke="#525258" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                          stroke-linejoin="round" />
                        <path class="icon-color-theme"
                          d="M14 7C15.6569 7 17 5.65685 17 4C17 2.34315 15.6569 1 14 1C12.3431 1 11 2.34315 11 4C11 5.65685 12.3431 7 14 7Z"
                          stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
                          stroke-linejoin="round" />
                      </svg>
                    </span>
                    Community
                  </button> -->

                </div>
              </nav>
            </div>
          </div>
        </div>

        <div class="col-xxl-7 col-xl-7 col-lg-6">
          <div class="faq__tab-content tp-accordion">
            <div class="tab-content" id="nav-tabContent-2">

              <div v-if="service_details">
                <template v-for="service in service_details" :key="service.attributes.category_id">

                  <div class="tab-pane fade show active" :id="service.attributes.category_id" role="tabpanel"
                    :aria-labelledby="service.attributes.category_id + '-tab'">
                    <div class="accordion" :id="service.attributes.category_id + '_accordion'">
                      <div class="accordion-item">
                        <h2 class="accordion-header" id="search">
                          <button class="accordion-button" type="button" data-bs-toggle="collapse"
                            data-bs-target="#collapsesearch" aria-expanded="true" aria-controls="collapsesearch">
                            {{ service.attributes.Title }}
                          </button>
                        </h2>
                        <div id="collapsesearch" class="accordion-collapse collapse show" aria-labelledby="search"
                          :data-bs-parent="'#' + service.attributes.category_id + '_accordion'">
                          <div class="accordion-body">
                            <p>{{ service.attributes.Description }}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </template>
              </div>



              <!-- <div class="tab-pane fade show active" id="nav-general" role="tabpanel" aria-labelledby="nav-general-tab-2">
                <div class="accordion" id="general_accordion">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="search">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapsesearch" aria-expanded="true" aria-controls="collapsesearch">
                        Global search engine optimization
                      </button>
                    </h2>
                    <div id="collapsesearch" class="accordion-collapse collapse show" aria-labelledby="search"
                      data-bs-parent="#general_accordion">
                      <div class="accordion-body">
                        <p>A startup or start-up is started by individual founders or entrepreneurs to search for a
                          repeatable and scalable business model. A startup or start-up is started by individual
                          founders...</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->


              <!-- <div class="tab-pane fade" id="nav-community" role="tabpanel" aria-labelledby="nav-community-tab-2">
                <div class="accordion" id="community_accordion">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne1">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseOne1" aria-expanded="true" aria-controls="collapseOne1">
                        What kind of marketing efforts do you specialize in?
                      </button>
                    </h2>
                    <div id="collapseOne1" class="accordion-collapse collapse show" aria-labelledby="headingOne1"
                      data-bs-parent="#community_accordion">
                      <div class="accordion-body">
                        <p>A startup or start-up is started by individual founders or entrepreneurs to search for a
                          repeatable and scalable business model. A startup or start-up is started by individual
                          founders...</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div> -->

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</template>

<script setup lang="ts">
import TabContent from '~~/components/faqs/StartUpFaq/TabContent.vue';
import commonFaq from '~~/mixins/commonFaq';

import { StrapiLocale } from "@nuxtjs/strapi/dist/runtime/types";
import { ServiceDetail } from "~/types/service";

const { locale } = useI18n();

const { data: service_details } = useAsyncData(
  'service-details',
  async () => {
    const { find } = useStrapi()
    const service_details = await find<ServiceDetail>('service-details', {
      locale: locale.value as StrapiLocale,
      populate: '*'
    })
    // generate category_slug from Category
    const new_service_details = service_details.data.map((service_detail) => {
      service_detail.attributes.category_id = 'service_detail_id' + service_detail.id.toString()
      return service_detail
    })
    return new_service_details
  }
)
</script>
